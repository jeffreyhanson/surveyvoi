<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulation Study • surveyvoi</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Simulation Study">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">surveyvoi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/approximation.html">Approximation Benchmark</a>
    </li>
    <li>
      <a href="../articles/simulation.html">Simulation Study</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jeffreyhanson/surveyvoi">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Simulation Study</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jeffreyhanson/surveyvoi/blob/master/vignettes/simulation.Rmd"><code>vignettes/simulation.Rmd</code></a></small>
      <div class="hidden name"><code>simulation.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The resources available for conservation are limited. To ensure that conservation resources are allocated cost-effectively, conservation plans (termed prioritizations) can be developed – using a combination of economic, biodiversity, and land-use data – to prioritize a set of sites for conservation management (e.g. protected area establishment). However, existing data on biodiversity patterns is incomplete. As a consequence, spatial prioritizations can potentially be improved by collecting additional data (e.g. surveying sites to refine estimates of which species are present inside them). However, this is complicated by the fact that surveying sites consumes limited resources that also need to be used for conservation management. Thus decision makers need to strategically prioritize sites for surveys that will substantially improve spatial prioritisations—this is not a trivial task.</p>
<p>The <em>surveyvoi</em> package is decision support tool for prioritizing sites for surveys based on their potential to improve spatial prioritizations for managing biodiversity. Given a set of sites that could potentially be acquired for conservation management – wherein some sites have previously been surveyed and other sites have not – this package aims to identify which sites should be surveyed because doing so could lead to vastly superior conservation management plans (i.e. the management <em>decision</em>). Methods are provided to calculate the <em>expected value of the decision given current information</em> (<code>evdci</code> function), and the <em>expected value of the decision given a survey scheme</em> (<code>evdsi</code> function). Furthermore, by examining survey schemes, optimal survey schemes can be identified (<code>optimal_survey_scheme</code> function). This package requires the <a href="https://www.gurobi.com"><em>Gurobi</em> software suite</a>. In this vignette, we will use a simulated dataset to explore these methods.</p>
</div>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<p>Let’s start by setting up our R session. Here we will load some R packages and pre-set the random number generators for reproducibility.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load packages</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(surveyvoi)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyr)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(gridExtra)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(viridis)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tibble)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(RandomFields)

<span class="co"># set RNG seeds for reproducibility</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">505</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/RFoptions">RFoptions</a></span>(<span class="dt">seed =</span> <span class="dv">505</span>)

<span class="co"># set default table printing options</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">options</a></span>(<span class="dt">pillar.sigfig =</span> <span class="dv">6</span>)</code></pre></div>
</div>
<div id="simulate-data" class="section level2">
<h2 class="hasAnchor">
<a href="#simulate-data" class="anchor"></a>Simulate data</h2>
<p>Let’s simulate some data. To keep things simple, we will simulate data for 30 sites and one conservation feature (e.g. species). Of the 30 sites in total, we will simulate survey data for 20 sites—meaning that 10 of the sites will not have survey data. We will also simulate two spatially auto-correlated variables to characterise the environmental conditions within the sites. Although the simulation code (i.e. <code>simulate_site_data</code>) can output the probability that features are expected to inhabit the sites, we will disable this option to make our simulation study more realistic and instead predict these probabilities using statistical models.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># simulate site data</span>
site_data &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/simulate_site_data">simulate_site_data</a></span>(
  <span class="dt">n_sites =</span> <span class="dv">30</span>, <span class="dt">n_features =</span> <span class="dv">1</span>, <span class="dt">proportion_of_sites_missing_data =</span> <span class="dv">10</span> <span class="op">/</span><span class="st"> </span><span class="dv">30</span>,
  <span class="dt">n_env_vars =</span> <span class="dv">2</span>, <span class="dt">output_probabilities =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## ..</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># print site data</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(site_data)</code></pre></div>
<pre><code>## Simple feature collection with 30 features and 5 fields
## geometry type:  POINT
## dimension:      XY
## bbox:           xmin: 0.01366063 ymin: 0.01929364 xmax: 0.9272025 ymax: 0.9946761
## CRS:            NA
## # A tibble: 30 x 6
##    survey_cost management_cost          e1        e2    f1
##          &lt;dbl&gt;           &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
##  1     7.07047         69.9782  0.539321   -0.895568     1
##  2     5.43637         69.0084 -0.862086    0.135739    NA
##  3     7.02416         66.8320  0.557181   -0.974966     1
##  4     7.11699         68.7759 -0.00550767 -1.14857      1
##  5     6.13178         64.6530  0.590071   -0.841855    NA
##  6     4.31864         67.0997  1.44469     1.86069      0
##  7     5.46042         63.6544  0.786510   -0.619393     0
##  8     8.88090         69.5445 -0.794324   -1.09249      1
##  9     6.39256         72.6893 -1.00987    -0.651723     1
## 10     7.20251         72.0285 -1.14882    -0.707694     1
## # … with 20 more rows, and 1 more variable: geometry &lt;POINT&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot the spatial location of the sites</span>
<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(site_data) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span>() <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span>(<span class="st">"sites"</span>)</code></pre></div>
<p><img src="simulation_files/figure-html/unnamed-chunk-5-1.png" width="700" style="display: block; margin: auto;"></p>
<p>The <code>site_data</code> object is a spatially explicit dataset (i.e. <code>sf</code> object) that contains information on the site locations and additional information for each site too. Here, each row corresponds to a different site and each column contains different information about the sites. The <code>f1</code> column contains the results from previous surveys, where ones indicate that the feature was previously detected at a site, zeros indicate that the feature has not previously been detected at a site, and missing (<code>NA</code>) values mean that a site has not yet been surveyed. The <code>survey_cost</code> column contains the cost for surveying each site, and the <code>management_cost</code> column contains the cost for managing each site for conservation. The <code>e1</code> and <code>e2</code> columns contain environmental conditions (e.g. temperature, precipitation). To help understand the simulated data, let’s create some visualizations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot site occupancy data from previous surveys</span>
site_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">f1 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/character">as.character</a></span>(f1)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>() <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> f1)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"1"</span> =<span class="st"> "red"</span>, <span class="st">"0"</span> =<span class="st"> "black"</span>),
                       <span class="dt">na.value =</span> <span class="st">"blue"</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">title =</span> <span class="st">"presence/absence data"</span>)</code></pre></div>
<p><img src="simulation_files/figure-html/unnamed-chunk-6-1.png" width="336" style="display: block; margin: auto;"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot site cost data</span>
<span class="co"># note that survey and management costs are on different scales</span>
p1 &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(site_data) <span class="op">+</span>
<span class="st">      </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> survey_cost)) <span class="op">+</span>
<span class="st">      </span><span class="kw"><a href="https://www.rdocumentation.org/packages/viridis/topics/scale_viridis">scale_color_viridis</a></span>() <span class="op">+</span>
<span class="st">      </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">title =</span> <span class="st">"survey cost"</span>) <span class="op">+</span>
<span class="st">      </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">legend.title =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>())
p2 &lt;-<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(site_data) <span class="op">+</span>
<span class="st">      </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> management_cost)) <span class="op">+</span>
<span class="st">      </span><span class="kw"><a href="https://www.rdocumentation.org/packages/viridis/topics/scale_viridis">scale_color_viridis</a></span>() <span class="op">+</span>
<span class="st">      </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">title =</span> <span class="st">"management cost"</span>) <span class="op">+</span>
<span class="st">      </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">legend.title =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span>())
<span class="kw"><a href="https://www.rdocumentation.org/packages/gridExtra/topics/arrangeGrob">grid.arrange</a></span>(p1, p2, <span class="dt">nrow =</span> <span class="dv">1</span>)</code></pre></div>
<p><img src="simulation_files/figure-html/unnamed-chunk-7-1.png" width="604.8" style="display: block; margin: auto;"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot site environmental data</span>
site_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">starts_with</a></span>(<span class="st">"e"</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span>(var, value, <span class="op">-</span>geometry) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>() <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> value)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="op">~</span><span class="st"> </span>var) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://www.rdocumentation.org/packages/viridis/topics/scale_viridis">scale_color_viridis</a></span>() <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">title =</span> <span class="st">"environmental conditions"</span>)</code></pre></div>
<p><img src="simulation_files/figure-html/unnamed-chunk-8-1.png" width="504" style="display: block; margin: auto;"></p>
<p>After simulating data for the sites, we will simulate data for the conservation feature.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># simulate feature data</span>
feature_data &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/simulate_feature_data">simulate_feature_data</a></span>(
  <span class="dt">n_features =</span> <span class="dv">1</span>, <span class="dt">proportion_of_survey_features =</span> <span class="dv">1</span>)

<span class="co"># print feature data</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(feature_data)</code></pre></div>
<pre><code>## # A tibble: 1 x 9
##   name  survey survey_sensitiv… survey_specific… model_sensitivi…
##   &lt;chr&gt; &lt;lgl&gt;             &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
## 1 f1    TRUE           0.952171         0.815544         0.731463
## # … with 4 more variables: model_specificity &lt;dbl&gt;, preweight &lt;dbl&gt;,
## #   postweight &lt;dbl&gt;, target &lt;dbl&gt;</code></pre>
<p>The <code>feature_data</code> object is a table (i.e. <code>tibble</code> object) that contains information on the conservation feature. Here, each row corresponds to a different feature – and so it only has one row because we only have one feature – and each column contains different information about the feature(s). The <code>name</code> column contains the name of the feature. The <code>survey</code> column indicates if the feature will be examined in future surveys. The <code>preweight</code>, <code>postweight</code>, and <code>target</code> columns contain values that specify the conservation value (or utility) accrued when a set of sites when sites are managed for conservation (e.g. sites are prioritised for protected area establishment; we will explore this further below). Finally, the <code>sensitivity</code> and <code>specificity</code> columns denote the sensitivity (probability of correctly detecting a presence) and specificity (probability of correctly detecting an absence) of the survey methodology.</p>
</div>
<div id="modelling-probability-of-occupancy" class="section level2">
<h2 class="hasAnchor">
<a href="#modelling-probability-of-occupancy" class="anchor"></a>Modelling probability of occupancy</h2>
<p>After simulating the data, we need to estimate the probability of the feature occurring in the unsurveyed sites. This is important for calculating the return on investment of surveying sites, because if we can reliably predict the probability of the feature(s) occurring in unsurveyed sites using models then we may not need to survey them. Specifically, we will fit gradient boosted regression trees – via the <a href="https://xgboost.readthedocs.io/en/latest/">xgboost R package</a> – using functions contained in this package. These models are well-suited for modelling species distributions because they can accommodate high order interactions among different predictor variables that are needed to effectively model species’ environmental niches. Since gradient boosted regression trees have many tuning parameters that influence their performance, we will also supply parameters to perform a preliminary calibration procedure using <em>k</em>-fold cross-validation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create list of candidate parameter value for calibration procedure</span>
candidate_xgb_parameters &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(
  <span class="dt">max_depth =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">1</span>),
  <span class="dt">eta =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">0.1</span>),
  <span class="dt">lambda =</span> <span class="dv">10</span> <span class="op">^</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="op">-</span><span class="fl">1.0</span>, <span class="fl">0.0</span>, <span class="fl">0.25</span>),
  <span class="dt">subsample =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="fl">0.5</span>, <span class="fl">1.0</span>, <span class="fl">0.1</span>),
  <span class="dt">colsample_bytree =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="fl">0.4</span>, <span class="fl">1.0</span>, <span class="fl">0.1</span>),
  <span class="dt">objective =</span> <span class="st">"binary:logistic"</span>)

<span class="co"># preview candidate parameters</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(candidate_xgb_parameters)</code></pre></div>
<pre><code>## List of 6
##  $ max_depth       : num [1:10] 1 2 3 4 5 6 7 8 9 10
##  $ eta             : num [1:5] 0.1 0.2 0.3 0.4 0.5
##  $ lambda          : num [1:5] 0.1 0.178 0.316 0.562 1
##  $ subsample       : num [1:6] 0.5 0.6 0.7 0.8 0.9 1
##  $ colsample_bytree: num [1:7] 0.4 0.5 0.6 0.7 0.8 0.9 1
##  $ objective       : chr "binary:logistic"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># identify suitable parameters for model fitting</span>
<span class="co"># ideally, we would set n_random_search_iterations much higher (e.g. 10000),</span>
<span class="co"># but we will keep it low to reduce processing time for this example</span>
xgb_results &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/fit_occupancy_models">fit_occupancy_models</a></span>(
  site_data, <span class="st">"f1"</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"e1"</span>, <span class="st">"e2"</span>), <span class="dt">n_folds =</span> <span class="dv">2</span>,
  <span class="dt">n_random_search_iterations =</span> <span class="dv">100</span>, <span class="dt">parameters =</span> candidate_xgb_parameters)</code></pre></div>
<p>After fitting the models, we can examine the tuning parameters used to fit the models, extract the modelled probability of occupancy, and evaluate the performance of the models.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># print best parameters</span>
xgb_parameters &lt;-<span class="st"> </span>xgb_results<span class="op">$</span>parameters
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(xgb_parameters)</code></pre></div>
<pre><code>## [[1]]
## [[1]]$max_depth
## [1] 2
## 
## [[1]]$eta
## [1] 0.1
## 
## [[1]]$nrounds
## [1] 80
## 
## [[1]]$scale_pos_weight
## [1] 0.8333333
## 
## [[1]]$lambda
## [1] 0.3162278
## 
## [[1]]$subsample
## [1] 0.7
## 
## [[1]]$colsample_bytree
## [1] 0.5
## 
## [[1]]$objective
## [1] "binary:logistic"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># print model performance (AUC value)</span>
<span class="co"># since this value is greater than 0.8, our model is "good enough"</span>
xgb_performance &lt;-<span class="st"> </span>xgb_results<span class="op">$</span>performance
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(xgb_performance))</code></pre></div>
<pre><code>##   feature train_auc_mean train_auc_std train_sensitivity_mean
## 1      f1      0.8870833     0.0465512              0.7166667
##   train_sensitivity_std train_specificity_mean train_specificity_std
## 1             0.1649916                  0.875             0.1767767
##   test_auc_mean test_auc_std test_sensitivity_mean test_sensitivity_std
## 1     0.9695833   0.01355288             0.8333333            0.2357023
##   test_specificity_mean test_specificity_std
## 1                   0.9            0.1414214</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># store the model sensitivities and specificities in the feature_data object</span>
feature_data<span class="op">$</span>model_sensitivity &lt;-<span class="st"> </span>xgb_performance<span class="op">$</span>test_sensitivity_mean
feature_data<span class="op">$</span>model_specificity &lt;-<span class="st"> </span>xgb_performance<span class="op">$</span>test_specificity_mean

<span class="co"># store predicted probabilities values in the site_data object</span>
xgb_predictions &lt;-<span class="st"> </span>xgb_results<span class="op">$</span>predictions
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(xgb_predictions)</code></pre></div>
<pre><code>## # A tibble: 30 x 1
##          f1
##       &lt;dbl&gt;
##  1 0.518793
##  2 0.500435
##  3 0.518793
##  4 0.563083
##  5 0.518793
##  6 0.425734
##  7 0.518793
##  8 0.594216
##  9 0.594216
## 10 0.594216
## # … with 20 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">site_data<span class="op">$</span>p1 &lt;-<span class="st"> </span>xgb_predictions<span class="op">$</span>f1

<span class="co"># plot site estimated occupancy probabilities</span>
<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(site_data) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> p1)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/viridis/topics/scale_viridis">scale_color_viridis</a></span>() <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="dt">title =</span> <span class="st">"modelled probabilities"</span>)</code></pre></div>
<p><img src="simulation_files/figure-html/unnamed-chunk-11-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
<div id="expected-value-given-current-information" class="section level2">
<h2 class="hasAnchor">
<a href="#expected-value-given-current-information" class="anchor"></a>Expected value given current information</h2>
<p>After simulating and modelling the data, we will now examine the <em>expected value of the decision given current information</em>. This value represents the conservation value of the optimal spatial prioritization given current information, whilst accounting for uncertainty in the presence (and absence) of the conservation feature in each site. Specifically, “current information” refers to our existing survey data and our occupancy models. Before we can compute the <em>expected value of the decision given current information</em>, we first need to decide how well will measure the value (or utility) of a given management decision.</p>
<p>We will use an equation based on the Zonation decision support tool <span class="citation">(Moilanen 2007)</span> to parametrise the conservation value associated with managing a set of sites for conservation. It represents the objective function of the spatial prioritization component of the value of information calculations. To interpret this equation, let <span class="math inline">\(J\)</span> denote the set of sites (indexed by <span class="math inline">\(j\)</span>), and <span class="math inline">\(I\)</span> denote the set of features (indexed by <span class="math inline">\(i\)</span>). Also let <span class="math inline">\(X_j\)</span> contain binary (i.e. zero or one) values indicating if each site <span class="math inline">\(i \in I\)</span> is prioritized for conservation management or not, <span class="math inline">\(Z_{ij}\)</span> contain binary values indicating the presence or absence of features <span class="math inline">\(i \in I\)</span> occurring in sites <span class="math inline">\(j \in J\)</span>, <span class="math inline">\(\alpha_i\)</span> denote the <code>preweight</code> column value(s), <span class="math inline">\(\gamma_i\)</span> denote the <code>postweight</code> column value(s), and <span class="math inline">\(\tau_i\)</span> denote the <code>target</code> column value(s). Furthermore, let <span class="math inline">\(H_i\)</span> denote the total number of occupied sites for features <span class="math inline">\(i \in I\)</span>, and let <span class="math inline">\(T\)</span> denote the total number of sites <span class="math inline">\(j \in J\)</span>.</p>
<p><span class="math display">\[
H_i = \sum_{j \in J} X_j Z_{ij} \\
T =  \sum_{j \in J} 1 \\
B = \sum_{i \in I}
\begin{cases}
\alpha \times \frac{H_i}{\tau_i}, \text{ if } H_i &lt; \tau_i \\
\alpha + \left( \gamma \times \frac{H_i - \tau_i}{T - \tau_i} \right), \text{ else } \\
\end{cases}
\]</span></p>
<p>Let’s visualize this equation by making a graph. Here, the x-axis shows the number of protected sites that occupied by the feature, and the y-axis shows the conservation value associated with this number.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># plot the value function</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/plot_conservation_value">plot_conservation_value</a></span>(
  <span class="dt">site_data =</span> site_data,
  <span class="dt">feature_data =</span> feature_data,
  <span class="dt">site_occupancy_columns =</span> <span class="st">"f1"</span>,
  <span class="dt">feature_preweight_column =</span> <span class="st">"preweight"</span>,
  <span class="dt">feature_postweight_column =</span> <span class="st">"postweight"</span>,
  <span class="dt">feature_target_column =</span> <span class="st">"target"</span>)</code></pre></div>
<p><img src="simulation_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto;"></p>
<p>We can see that conservation value increases with the amount of the conservation feature held in the prioritization (i.e. the line is always increasing). This is important because it means that we will always consider it more beneficial to protect more sites that contain the conservation features. Additionally, we can also see that the line has a bend in it – specified using value(s) in the <code>target</code> column – and so the rate of the conservation value accrued is much slower after crossing a the target threshold. This is useful if we have multiple features, because it tells the conservation prioritization algorithm that once we have conserved “enough” of one feature (specified using the <code>target</code> column) that it can then focus on other features (broadly speaking). Furthermore, the solid line represents the range of conservation values that we could obtain if we protected sites that have <em>observed</em> presences, and the dashed line represents the <em>potential</em> values we could obtain if we also protected unsurveyed sites and those unsurveyed sites contained the feature.</p>
<p>Next, we will set a total budget (i.e. <code>total_budget</code>). This total budget represents the total amount of resources available for surveying sites and managing them for conservation. It will be set as 80% of the total site management costs.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># calculate total budget for surveying and managing sites</span>
total_budget &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(site_data<span class="op">$</span>management_cost) <span class="op">*</span><span class="st"> </span><span class="fl">0.8</span>

<span class="co"># print total budget</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(total_budget)</code></pre></div>
<pre><code>## [1] 1600.412</code></pre>
<p>Given the total budget, we can now calculate the <em>expected value of the decision given current information</em>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># expected value of the decision given current information</span>
evd_current &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/evdci">evdci</a></span>(
  <span class="dt">site_data =</span> site_data,
  <span class="dt">feature_data =</span> feature_data,
  <span class="dt">site_occupancy_columns =</span> <span class="st">"f1"</span>,
  <span class="dt">site_probability_columns =</span> <span class="st">"p1"</span>,
  <span class="dt">site_management_cost_column =</span> <span class="st">"management_cost"</span>,
  <span class="dt">feature_survey_sensitivity_column =</span> <span class="st">"survey_sensitivity"</span>,
  <span class="dt">feature_survey_specificity_column =</span> <span class="st">"survey_specificity"</span>,
  <span class="dt">feature_model_sensitivity_column =</span> <span class="st">"model_sensitivity"</span>,
  <span class="dt">feature_model_specificity_column =</span> <span class="st">"model_specificity"</span>,
  <span class="dt">feature_preweight_column =</span> <span class="st">"preweight"</span>,
  <span class="dt">feature_postweight_column =</span> <span class="st">"postweight"</span>,
  <span class="dt">feature_target_column =</span> <span class="st">"target"</span>,
  <span class="dt">total_budget =</span> total_budget)

<span class="co"># print value</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(evd_current)</code></pre></div>
<pre><code>## [1] 176.229</code></pre>
<p>We can potentially improve the <em>expected value of the decision given current information</em> by learning more about which sites are more likely (and less likely) to contain the conservation feature.</p>
</div>
<div id="survey-schemes" class="section level2">
<h2 class="hasAnchor">
<a href="#survey-schemes" class="anchor"></a>Survey schemes</h2>
<p>Now we will generate some candidate survey schemes to see if we can improve the management decision. To achieve this, we will set a budget for surveying additional sites. Specifically, this survey budget (i.e. <code>survey_budget</code>) will be set as 40% of the survey costs for the unsurveyed sites. Note that our total budget must always be greater than or equal to the survey budget.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># calculate budget for surveying sites</span>
<span class="co">#   add column to site_data indicating if the sites already have data or not</span>
site_data<span class="op">$</span>surveyed &lt;-<span class="st"> </span><span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/NA">is.na</a></span>(site_data<span class="op">$</span>f1)

<span class="co">#   add column to site_data containing the additional survey costs,</span>
<span class="co">#   i.e. sites that already have data have a zero cost, and</span>
<span class="co">#   sites that are missing data retain their cost values</span>
site_data &lt;-
<span class="st">  </span>site_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">new_survey_cost =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/if_else.html">if_else</a></span>(surveyed, <span class="dv">0</span>, survey_cost))

<span class="co">#   calculate total cost of surveying remaining unsurveyed sites</span>
total_cost_of_surveying_remaining_sites &lt;-
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sum">sum</a></span>(site_data<span class="op">$</span>new_survey_cost)

<span class="co">#   calculate budget for surveying sites</span>
survey_budget &lt;-<span class="st"> </span>total_cost_of_surveying_remaining_sites <span class="op">*</span><span class="st"> </span><span class="fl">0.4</span>

<span class="co"># print budgets</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(survey_budget)</code></pre></div>
<pre><code>## [1] 21.15986</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(total_budget)</code></pre></div>
<pre><code>## [1] 1600.412</code></pre>
<p>We will generate survey schemes by selecting unsurveyed sites that (i) increase geographic coverage among surveyed sites, (ii) increase coverage of environmental conditions among surveyed sites <span class="citation">(i.e. environmental diversity; Faith &amp; Walker 1996)</span>, (iii) select unsurveyed site with highly uncertain modelled predictions (i.e. modelled probabilities close to 0.5), (iv) increase coverage of sites that have low management costs, and (v) increase coverage of sites with high modelled probabilities of occupancy (i.e. predicted site richness).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># (i) generate survey scheme to increase geographic coverage</span>
geo_scheme &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/geo_cov_survey_scheme">geo_cov_survey_scheme</a></span>(site_data, <span class="st">"new_survey_cost"</span>, survey_budget,
                                    <span class="dt">locked_out =</span> <span class="st">"surveyed"</span>)

<span class="co"># (ii) generate survey scheme to increase environmental diversity,</span>
<span class="co"># environmental distances are calculated using Euclidean distances here,</span>
<span class="co"># though we might consider something like Mahalanobis distances for a</span>
<span class="co"># real dataset to account for correlations among environmental variables)</span>
env_scheme &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/env_div_survey_scheme">env_div_survey_scheme</a></span>(site_data, <span class="st">"new_survey_cost"</span>, survey_budget,
                                    <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"e1"</span>, <span class="st">"e2"</span>), <span class="dt">locked_out =</span> <span class="st">"surveyed"</span>,
                                    <span class="dt">method =</span> <span class="st">"euclidean"</span>)

<span class="co"># (iii) generate survey scheme using site uncertainty scores</span>
<span class="co"># calculate site uncertainty scores</span>
site_data<span class="op">$</span>uncertainty_score &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/relative_site_uncertainty_scores">relative_site_uncertainty_scores</a></span>(site_data, <span class="st">"p1"</span>)

<span class="co"># generate survey scheme</span>
unc_scheme &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/weighted_survey_scheme">weighted_survey_scheme</a></span>(site_data, <span class="st">"new_survey_cost"</span>,
                                     survey_budget, <span class="st">"uncertainty_score"</span>,
                                     <span class="dt">locked_out =</span> <span class="st">"surveyed"</span>)

<span class="co"># (iv) generate survey scheme using site management cheapness</span>
<span class="co"># (i.e. inverse management cost)</span>
site_data<span class="op">$</span>inv_management_cost &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">/</span><span class="st"> </span>site_data<span class="op">$</span>management_cost
cheap_scheme &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/weighted_survey_scheme">weighted_survey_scheme</a></span>(site_data, <span class="st">"new_survey_cost"</span>,
                                       survey_budget, <span class="st">"inv_management_cost"</span>,
                                       <span class="dt">locked_out =</span> <span class="st">"surveyed"</span>)

<span class="co"># (v) generate survey scheme using site richness scores</span>
<span class="co"># calculate site richness scores</span>
site_data<span class="op">$</span>richness_score &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/relative_site_richness_scores">relative_site_richness_scores</a></span>(site_data, <span class="st">"p1"</span>)

<span class="co"># generate survey scheme</span>
rich_scheme &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/weighted_survey_scheme">weighted_survey_scheme</a></span>(site_data, <span class="st">"new_survey_cost"</span>,
                                      survey_budget, <span class="st">"richness_score"</span>,
                                      <span class="dt">locked_out =</span> <span class="st">"surveyed"</span>)</code></pre></div>
<p>Let’s visualize the different survey schemes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># add schemes to site_data</span>
site_data<span class="op">$</span>geo_scheme &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(geo_scheme)
site_data<span class="op">$</span>env_scheme &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(env_scheme)
site_data<span class="op">$</span>unc_scheme &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(unc_scheme)
site_data<span class="op">$</span>cheap_scheme &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(cheap_scheme)
site_data<span class="op">$</span>rich_scheme &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(rich_scheme)

<span class="co"># plot the schemes</span>
site_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">contains</a></span>(<span class="st">"scheme"</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span>(name, value, <span class="op">-</span>geometry) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_if</a></span>(is.logical, as.character) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">name =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(name, <span class="dt">levels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>(name))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>() <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> value)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="op">~</span><span class="st"> </span>name, <span class="dt">nrow =</span> <span class="dv">2</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"TRUE"</span> =<span class="st"> "red"</span>, <span class="st">"FALSE"</span> =<span class="st"> "black"</span>))</code></pre></div>
<p><img src="simulation_files/figure-html/unnamed-chunk-20-1.png" width="604.8" style="display: block; margin: auto;"></p>
<p>We can see that different approaches yield different survey schemes – but which survey scheme is the best?</p>
</div>
<div id="expected-value-of-the-decision-given-the-candidate-survey-schemes" class="section level2">
<h2 class="hasAnchor">
<a href="#expected-value-of-the-decision-given-the-candidate-survey-schemes" class="anchor"></a>Expected value of the decision given the candidate survey schemes</h2>
<p>Now that we’ve generated the survey schemes, let’s calculate the <em>expected value of the decision of each survey scheme</em>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create table to store results</span>
evd_survey_schemes &lt;-
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">tibble</a></span>(<span class="dt">name =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"geo_scheme"</span>, <span class="st">"env_scheme"</span>, <span class="st">"unc_scheme"</span>, <span class="st">"cheap_scheme"</span>,
                  <span class="st">"rich_scheme"</span>))

<span class="co"># expected value of the decision given each survey scheme</span>
evd_survey_schemes<span class="op">$</span>value &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">sapply</a></span>(
  evd_survey_schemes<span class="op">$</span>name, <span class="cf">function</span>(x) {
    <span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/evdsi">evdsi</a></span>(
      <span class="dt">site_data =</span> site_data,
      <span class="dt">feature_data =</span> feature_data,
      <span class="dt">site_occupancy_columns =</span> <span class="st">"f1"</span>,
      <span class="dt">site_probability_columns =</span> <span class="st">"p1"</span>,
      <span class="dt">site_env_vars_columns =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"e1"</span>, <span class="st">"e2"</span>),
      <span class="dt">site_survey_scheme_column =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/character">as.character</a></span>(x),
      <span class="dt">site_management_cost_column =</span> <span class="st">"management_cost"</span>,
      <span class="dt">site_survey_cost_column =</span> <span class="st">"survey_cost"</span>,
      <span class="dt">feature_survey_column =</span> <span class="st">"survey"</span>,
      <span class="dt">feature_survey_sensitivity_column =</span> <span class="st">"survey_sensitivity"</span>,
      <span class="dt">feature_survey_specificity_column =</span> <span class="st">"survey_specificity"</span>,
      <span class="dt">feature_model_sensitivity_column =</span> <span class="st">"model_sensitivity"</span>,
      <span class="dt">feature_model_specificity_column =</span> <span class="st">"model_specificity"</span>,
      <span class="dt">feature_preweight_column =</span> <span class="st">"preweight"</span>,
      <span class="dt">feature_postweight_column =</span> <span class="st">"postweight"</span>,
      <span class="dt">feature_target_column =</span> <span class="st">"target"</span>,
      <span class="dt">total_budget =</span> total_budget,
      <span class="dt">xgb_parameters =</span> xgb_parameters,
      <span class="dt">xgb_n_folds =</span> <span class="dv">2</span>)
})

<span class="co"># print values</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(evd_survey_schemes)</code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   name           value
##   &lt;chr&gt;          &lt;dbl&gt;
## 1 geo_scheme   176.087
## 2 env_scheme   176.447
## 3 unc_scheme   176.087
## 4 cheap_scheme 176.087
## 5 rich_scheme  176.192</code></pre>
<p>We can also calculate how much the information gained from each of the survey schemes is expected to improve the management decision. This quantity is called the <em>return on investment</em> for each survey scheme.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># estimate the return on investment for each survey scheme</span>
evd_survey_schemes<span class="op">$</span>roi &lt;-
<span class="st">  </span>evd_survey_schemes<span class="op">$</span>value <span class="op">-</span><span class="st"> </span>evd_current

<span class="co"># print values</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(evd_survey_schemes)</code></pre></div>
<pre><code>## # A tibble: 5 x 3
##   name           value        roi
##   &lt;chr&gt;          &lt;dbl&gt;      &lt;dbl&gt;
## 1 geo_scheme   176.087 -0.141894 
## 2 env_scheme   176.447  0.217914 
## 3 unc_scheme   176.087 -0.141894 
## 4 cheap_scheme 176.087 -0.141894 
## 5 rich_scheme  176.192 -0.0366875</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># visualize the return on investment for each survey scheme</span>
<span class="co"># color the best survey scheme in blue</span>
evd_survey_schemes <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">name =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(name, <span class="dt">levels =</span> name),
         <span class="dt">is_best =</span> roi <span class="op">==</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">max</a></span>(roi)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> name, <span class="dt">y =</span> roi)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">fill =</span> is_best, <span class="dt">color =</span> is_best)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span>(<span class="st">"Survey scheme"</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span>(<span class="st">"Return on investment"</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"TRUE"</span> =<span class="st"> "#3366FF"</span>, <span class="st">"FALSE"</span> =<span class="st"> "black"</span>)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"TRUE"</span> =<span class="st"> "#3366FF"</span>, <span class="st">"FALSE"</span> =<span class="st"> "black"</span>)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">axis.text.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span>(<span class="dt">angle =</span> <span class="dv">30</span>, <span class="dt">vjust =</span> <span class="fl">0.65</span>),
          <span class="dt">legend.position =</span> <span class="st">"none"</span>)</code></pre></div>
<p><img src="simulation_files/figure-html/unnamed-chunk-22-1.png" width="700" style="display: block; margin: auto;"></p>
<p>In this particular simulation, we can see that conducting additional surveys can improve our ability to decide which sites we should manage for conservation. This is evidenced by the fact that some of the survey schemes (i.e. <code>env_scheme</code>) have positive return on investment values—meaning that the <em>expected value of the management decision</em> is greater when we conduct these surveys (even when accounting for survey costs). We can also see that surveying additional sites may not necessarily improve our conservation decisions, since some of the survey schemes (e.g. <code>rich_scheme</code>) have negative values. But what is the best possible – the optimal – survey scheme?</p>
</div>
<div id="optimal-survey-scheme" class="section level2">
<h2 class="hasAnchor">
<a href="#optimal-survey-scheme" class="anchor"></a>Optimal survey scheme</h2>
<p>Now let’s identify the optimal survey scheme by directly maximizing the <em>expected value of the decision given a survey scheme</em>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># generate optimal survey scheme(s)</span>
opt_scheme &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/optimal_survey_scheme">optimal_survey_scheme</a></span>(
    <span class="dt">site_data =</span> site_data,
    <span class="dt">feature_data =</span> feature_data,
    <span class="dt">site_occupancy_columns =</span> <span class="st">"f1"</span>,
    <span class="dt">site_probability_columns =</span> <span class="st">"p1"</span>,
    <span class="dt">site_env_vars_columns =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"e1"</span>, <span class="st">"e2"</span>),
    <span class="dt">site_management_cost_column =</span> <span class="st">"management_cost"</span>,
    <span class="dt">site_survey_cost_column =</span> <span class="st">"survey_cost"</span>,
    <span class="dt">feature_survey_column =</span> <span class="st">"survey"</span>,
    <span class="dt">feature_survey_sensitivity_column =</span> <span class="st">"survey_sensitivity"</span>,
    <span class="dt">feature_survey_specificity_column =</span> <span class="st">"survey_specificity"</span>,
    <span class="dt">feature_model_sensitivity_column =</span> <span class="st">"model_sensitivity"</span>,
    <span class="dt">feature_model_specificity_column =</span> <span class="st">"model_specificity"</span>,
    <span class="dt">feature_preweight_column =</span> <span class="st">"preweight"</span>,
    <span class="dt">feature_postweight_column =</span> <span class="st">"postweight"</span>,
    <span class="dt">feature_target_column =</span> <span class="st">"target"</span>,
    <span class="dt">total_budget =</span> total_budget,
    <span class="dt">survey_budget =</span> survey_budget,
    <span class="dt">xgb_parameters =</span> xgb_parameters,
    <span class="dt">xgb_n_folds =</span> <span class="dv">2</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># print number of optimal survey schemes</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(opt_scheme))</code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># add optimal scheme to site data</span>
site_data<span class="op">$</span>opt_scheme &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(opt_scheme[<span class="dv">1</span>, ])

<span class="co"># plot optimal scheme and the environmental diversity scheme</span>
site_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(opt_scheme, env_scheme) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span>(name, value, <span class="op">-</span>geometry) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_if</a></span>(is.logical, as.character) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">name =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(name, <span class="dt">levels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unique">unique</a></span>(name))) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>() <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">color =</span> value)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(<span class="op">~</span><span class="st"> </span>name, <span class="dt">nrow =</span> <span class="dv">1</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"TRUE"</span> =<span class="st"> "red"</span>, <span class="st">"FALSE"</span> =<span class="st"> "black"</span>))</code></pre></div>
<p><img src="simulation_files/figure-html/unnamed-chunk-24-1.png" width="504" style="display: block; margin: auto;"></p>
<p>We can see that the optimal survey scheme (<code>opt_scheme</code>) is different to the scheme based on surveying sites to increase the environmental diversity of surveyed sites (<code>env_scheme</code>). Interestingly, the optimal scheme selects fewer sites than the other survey schemes. This result shows that survey strategies need to ensure adequate funds remain for actually achieving conservation objectives.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># calculate return on investment of the optimal scheme</span>
evd_opt &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/surveyvoi/topics/evdsi">evdsi</a></span>(
    <span class="dt">site_data =</span> site_data,
    <span class="dt">feature_data =</span> feature_data,
    <span class="dt">site_occupancy_columns =</span> <span class="st">"f1"</span>,
    <span class="dt">site_probability_columns =</span> <span class="st">"p1"</span>,
    <span class="dt">site_env_vars_columns =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"e1"</span>, <span class="st">"e2"</span>),
    <span class="dt">site_survey_scheme_column =</span> <span class="st">"opt_scheme"</span>,
    <span class="dt">site_management_cost_column =</span> <span class="st">"management_cost"</span>,
    <span class="dt">site_survey_cost_column =</span> <span class="st">"survey_cost"</span>,
    <span class="dt">feature_survey_column =</span> <span class="st">"survey"</span>,
    <span class="dt">feature_survey_sensitivity_column =</span> <span class="st">"survey_sensitivity"</span>,
    <span class="dt">feature_survey_specificity_column =</span> <span class="st">"survey_specificity"</span>,
    <span class="dt">feature_model_sensitivity_column =</span> <span class="st">"model_sensitivity"</span>,
    <span class="dt">feature_model_specificity_column =</span> <span class="st">"model_specificity"</span>,
    <span class="dt">feature_preweight_column =</span> <span class="st">"preweight"</span>,
    <span class="dt">feature_postweight_column =</span> <span class="st">"postweight"</span>,
    <span class="dt">feature_target_column =</span> <span class="st">"target"</span>,
    <span class="dt">total_budget =</span> total_budget,
    <span class="dt">xgb_parameters =</span> xgb_parameters,
    <span class="dt">xgb_n_folds =</span> <span class="dv">2</span>)

<span class="co"># calculate value</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(evd_opt)</code></pre></div>
<pre><code>## [1] 176.8669</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># append optimal results to results table</span>
evd_survey_schemes &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cbind">rbind</a></span>(
  evd_survey_schemes,
  <span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">tibble</a></span>(<span class="dt">name =</span> <span class="st">"opt_scheme"</span>, <span class="dt">value =</span> evd_opt, <span class="dt">roi =</span> evd_opt <span class="op">-</span><span class="st"> </span>evd_current))

<span class="co"># print updated results table</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(evd_survey_schemes)</code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   name           value        roi
##   &lt;chr&gt;          &lt;dbl&gt;      &lt;dbl&gt;
## 1 geo_scheme   176.087 -0.141894 
## 2 env_scheme   176.447  0.217914 
## 3 unc_scheme   176.087 -0.141894 
## 4 cheap_scheme 176.087 -0.141894 
## 5 rich_scheme  176.192 -0.0366875
## 6 opt_scheme   176.867  0.637912</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># visualize return on investment values</span>
<span class="co"># color the best survey scheme in blue</span>
evd_survey_schemes <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">name =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(name, <span class="dt">levels =</span> name),
         <span class="dt">is_best =</span> roi <span class="op">==</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">max</a></span>(roi)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> name, <span class="dt">y =</span> roi)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">fill =</span> is_best, <span class="dt">color =</span> is_best)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span>(<span class="st">"Survey scheme"</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span>(<span class="st">"Return on investment"</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"TRUE"</span> =<span class="st"> "#3366FF"</span>, <span class="st">"FALSE"</span> =<span class="st"> "black"</span>)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"TRUE"</span> =<span class="st"> "#3366FF"</span>, <span class="st">"FALSE"</span> =<span class="st"> "black"</span>)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">axis.text.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span>(<span class="dt">angle =</span> <span class="dv">30</span>, <span class="dt">vjust =</span> <span class="fl">0.65</span>),
          <span class="dt">legend.position =</span> <span class="st">"none"</span>)</code></pre></div>
<p><img src="simulation_files/figure-html/unnamed-chunk-25-1.png" width="504" style="display: block; margin: auto;"></p>
<p>We can see that the optimal survey scheme has the highest <em>return on investment</em> of all the candidate survey schemes. To understand how sub-optimal the candidate survey schemes actually are, let’s compute their relative optimality and visualize them.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># express values in terms of optimality</span>
evd_survey_schemes<span class="op">$</span>optimality &lt;-
<span class="st">  </span>((<span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">max</a></span>(evd_survey_schemes<span class="op">$</span>roi) <span class="op">-</span><span class="st"> </span>evd_survey_schemes<span class="op">$</span>roi) <span class="op">/</span>
<span class="st">   </span><span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">max</a></span>(evd_survey_schemes<span class="op">$</span>roi)) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>

<span class="co"># visualize relative optimality</span>
<span class="co"># zero = optimal, and increasing values indicate greater sub-optimality</span>
evd_survey_schemes <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">name =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(name, <span class="dt">levels =</span> name),
         <span class="dt">optimality =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">abs</a></span>(optimality),
         <span class="dt">is_best =</span> optimality <span class="op">==</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">min</a></span>(optimality)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> name, <span class="dt">y =</span> optimality)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">fill =</span> is_best, <span class="dt">color =</span> is_best)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span>(<span class="st">"Survey scheme"</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span>(<span class="st">"Optimality gap (%)"</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"TRUE"</span> =<span class="st"> "#3366FF"</span>, <span class="st">"FALSE"</span> =<span class="st"> "black"</span>)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span>(<span class="dt">values =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/RandomFields/topics/QMath">c</a></span>(<span class="st">"TRUE"</span> =<span class="st"> "#3366FF"</span>, <span class="st">"FALSE"</span> =<span class="st"> "black"</span>)) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="dt">axis.text.x =</span> <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span>(<span class="dt">angle =</span> <span class="dv">30</span>, <span class="dt">vjust =</span> <span class="fl">0.65</span>),
          <span class="dt">legend.position =</span> <span class="st">"none"</span>)</code></pre></div>
<p><img src="simulation_files/figure-html/unnamed-chunk-26-1.png" width="504" style="display: block; margin: auto;"></p>
<p>We can see that the optimal survey scheme performs much better than all the other survey schemes. This result shows that value of information analyses can potentially improve management decisions by strategically allocating funds to surveys and conservation management.</p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-r2">
<p>Faith, D.P. &amp; Walker, P. (1996). Environmental diversity: On the best-possible use of surrogate data for assessing the relative biodiversity of sets of areas. <em>Biodiversity &amp; Conservation</em>, <em>5</em>, 399–415.</p>
</div>
<div id="ref-r1">
<p>Moilanen, A. (2007). Landscape zonation, benefit functions and target-based planning: Unifying reserve selection strategies. <em>Biological Conservation</em>, <em>134</em>, 571–579.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#setup">Setup</a></li>
      <li><a href="#simulate-data">Simulate data</a></li>
      <li><a href="#modelling-probability-of-occupancy">Modelling probability of occupancy</a></li>
      <li><a href="#expected-value-given-current-information">Expected value given current information</a></li>
      <li><a href="#survey-schemes">Survey schemes</a></li>
      <li><a href="#expected-value-of-the-decision-given-the-candidate-survey-schemes">Expected value of the decision given the candidate survey schemes</a></li>
      <li><a href="#optimal-survey-scheme">Optimal survey scheme</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://jeffrey-hanson.com">Jeffrey O Hanson</a>, <a href="https://josephrbennett.wordpress.com">Joseph Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
