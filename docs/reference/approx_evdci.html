<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Approximate expected value of the decision given current information — approx_evdci • surveyvoi</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Approximate expected value of the decision given current information — approx_evdci" />
<meta property="og:description" content="Calculate the expected value of the conservation management decision
given current information. This metric describes the value of the management
decision that is expected when the decision maker is limited to
existing biodiversity data (i.e. survey data and environmental niche models)." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">surveyvoi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/approximation.html">Approximation Benchmark</a>
    </li>
    <li>
      <a href="../articles/simulation.html">Simulation Study</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jeffreyhanson/surveyvoi">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Approximate expected value of the decision given current information</h1>
    <small class="dont-index">Source: <a href='https://github.com/jeffreyhanson/surveyvoi/blob/master/R/approx_evdci.R'><code>R/approx_evdci.R</code></a></small>
    <div class="hidden name"><code>approx_evdci.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate the <em>expected value of the conservation management decision
given current information</em>. This metric describes the value of the management
decision that is expected when the decision maker is limited to
existing biodiversity data (i.e. survey data and environmental niche models).</p>
    </div>

    <pre class="usage"><span class='fu'>approx_evdci</span>(<span class='no'>site_data</span>, <span class='no'>feature_data</span>, <span class='no'>site_occupancy_columns</span>,
  <span class='no'>site_probability_columns</span>, <span class='no'>site_management_cost_column</span>,
  <span class='no'>feature_survey_sensitivity_column</span>, <span class='no'>feature_survey_specificity_column</span>,
  <span class='no'>feature_model_sensitivity_column</span>, <span class='no'>feature_model_specificity_column</span>,
  <span class='no'>feature_alpha_column</span>, <span class='no'>feature_gamma_column</span>, <span class='no'>total_budget</span>,
  <span class='kw'>site_management_locked_in_column</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>prior_matrix</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>n_approx_obj_fun_points</span> <span class='kw'>=</span> <span class='fl'>1000</span>, <span class='kw'>optimality_gap</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>n_approx_replicates</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>n_approx_states_per_replicate</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Extremes'>min</a></span>(<span class='fl'>1000</span>,
  <span class='fu'>n_states</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>nrow</a></span>(<span class='no'>site_data</span>), <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>nrow</a></span>(<span class='no'>feature_data</span>))), <span class='kw'>seed</span> <span class='kw'>=</span> <span class='fl'>500</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>site_data</th>
      <td><p><code><a href='https://www.rdocumentation.org/packages/sf/topics/sf'>sf</a></code> object with site data.</p></td>
    </tr>
    <tr>
      <th>feature_data</th>
      <td><p><code><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></code> object with feature data.</p></td>
    </tr>
    <tr>
      <th>site_occupancy_columns</th>
      <td><p><code>character</code> names of <code>numeric</code>
columns in the
argument to <code>site_data</code> that contain presence/absence data.
Each column should correspond to a different feature, and contain
binary presence/absence data (zeros or ones) indicating if the
feature was detected in a previous survey or not. If a site has not
been surveyed before, then missing (<code>NA</code>) values should be used.</p></td>
    </tr>
    <tr>
      <th>site_probability_columns</th>
      <td><p><code>character</code> names of <code>numeric</code>
columns in the argument to <code>site_data</code> that contain modelled
probabilities of occupancy for each feature in each site.
Each column should correspond to a different feature, and contain
probability data (values between zero and one). No missing (<code>NA</code>)
values are permitted in these columns.</p></td>
    </tr>
    <tr>
      <th>site_management_cost_column</th>
      <td><p><code>character</code> name of column in the
argument to <code>site_data</code> that contains costs for managing each
site for conservation. This column should have <code>numeric</code> values that
are equal to or greater than zero. No missing (<code>NA</code>) values are
permitted in this column.</p></td>
    </tr>
    <tr>
      <th>feature_survey_sensitivity_column</th>
      <td><p><code>character</code> name of the
column in the argument to <code>feature_data</code> that contains
probability of future surveys correctly detecting a presence of each
feature in a given site (i.e. the sensitivity of the survey methodology).
This column should have <code>numeric</code> values that are between zero and
one. No missing (<code>NA</code>) values are permitted in this column.</p></td>
    </tr>
    <tr>
      <th>feature_survey_specificity_column</th>
      <td><p><code>character</code> name of the
column in the argument to <code>feature_data</code> that contains
probability of future surveys correctly detecting an absence of each
feature in a given site (i.e. the specificity of the survey methodology).
This column should have <code>numeric</code> values that are between zero and
one. No missing (<code>NA</code>) values are permitted in this column.</p></td>
    </tr>
    <tr>
      <th>feature_model_sensitivity_column</th>
      <td><p><code>character</code> name of the
column in the argument to <code>feature_data</code> that contains
probability of the initial models correctly predicting a presence of each
feature in a given site (i.e. the sensitivity of the models).
This column should have <code>numeric</code> values that are between zero and
one. No missing (<code>NA</code>) values are permitted in this column.
This should ideally be calculated using <code>fit_occupancy_models</code>.</p></td>
    </tr>
    <tr>
      <th>feature_model_specificity_column</th>
      <td><p><code>character</code> name of the
column in the argument to <code>feature_data</code> that contains
probability of the initial models correctly predicting an absence of each
feature in a given site (i.e. the specificity of the models).
This column should have <code>numeric</code> values that are between zero and
one. No missing (<code>NA</code>) values are permitted in this column.
This should ideally be calculated using <code>fit_occupancy_models</code>.</p></td>
    </tr>
    <tr>
      <th>feature_alpha_column</th>
      <td><p><code>character</code> name of the column in the
argument to <code>feature_data</code> that contains the \(\alpha\)
values used to parametrize
the conservation benefit of managing of each feature.
This column should have <code>numeric</code> values that
are equal to or greater than zero. No missing (<code>NA</code>) values are
permitted in this column.</p></td>
    </tr>
    <tr>
      <th>feature_gamma_column</th>
      <td><p><code>character</code> name of the column in the
argument to <code>feature_data</code> that contains the \(\gamma\)
values used to parametrize the conservation benefit of managing of each
feature.
This column should have <code>numeric</code> values that
are equal to or greater than zero. No missing (<code>NA</code>) values are
permitted in this column.</p></td>
    </tr>
    <tr>
      <th>total_budget</th>
      <td><p><code>numeric</code> maximum expenditure permitted
for conducting surveys and managing sites for conservation.</p></td>
    </tr>
    <tr>
      <th>site_management_locked_in_column</th>
      <td><p><code>character</code> name of the column
in the argument to <code>site_data</code> that contains <code>logical</code>
(<code>TRUE</code> / <code>FALSE</code>) values indicating which sites should
be locked in for (<code>TRUE</code>) being managed for conservation or
(<code>FALSE</code>) not. No missing (<code>NA</code>) values are permitted in this
column. This is useful if some sites have already been earmarked for
conservation, or if some sites are already being managed for conservation.
Defaults to <code>NULL</code> such that no sites are locked in.</p></td>
    </tr>
    <tr>
      <th>prior_matrix</th>
      <td><p><code>numeric</code> <code>matrix</code> containing
the prior probability of each feature occupying each site.
Rows correspond to features, and columns correspond to sites.
Defaults to <code>NULL</code> such that prior data is calculated automatically
using <code>prior_probability_matrix</code>.</p></td>
    </tr>
    <tr>
      <th>n_approx_obj_fun_points</th>
      <td><p><code>integer</code> number of points to use
for approximating the piecewise-linear components of the objective
function. Greater values result in more precise calculations, but
also incur more computational costs. Defaults to 1000.</p></td>
    </tr>
    <tr>
      <th>optimality_gap</th>
      <td><p><code>numeric</code> relative optimality gap for generating
conservation prioritizations. A value of zero indicates that
prioritizations must be solved to optimality. A value of 0.1 indicates
prioritizations must be within 10% of optimality. Defaults to 0.</p></td>
    </tr>
    <tr>
      <th>n_approx_replicates</th>
      <td><p><code>integer</code> number of replicates to use for
approximating the expected value of a given management action.
Valid arguments include an integer value greater than zero (e.g.
100), or <code>NULL</code>. If <code>NULL</code> is supplied as an argument, then
the expected value of a given management action is calculated precisely
and not using approximation methods. Defaults to <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>n_approx_states_per_replicate</th>
      <td><p><code>integer</code> number of states to use
per replicate for approximating the expected value of a given management
action. Valid arguments include an integer value greater than zero (e.g.
10000), or <code>NULL</code>. If <code>NULL</code> is supplied as an argument, then
the expected value of a given management action is calculated precisely
and not using approximation methods. Defaults to <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p><code>integer</code> random seed used for generating states. Defaults
to 500.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>numeric</code> <code>vector</code> containing the mean estimate and
  standard error.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Let \(I\) denote the set of feature (indexed by
\(i\)) and \(J\) the set of planning units (indexed by \(j\)).
To describe the results of previous surveys, let \(D_{ij}\) indicate the
detection/non-detection of feature \(i \in I\) in planning unit
\(j \in J\) during previous surveys using zeros and ones
(specified via <code>site_occupancy_columns</code>).
Also let \(U_j\) indicate if planning unit \(j \in J\) has previously
been surveyed or not.
To describe the accuracy of the surveys, let \(S_i\) denote the
sensitivity and \(N_i\) denote the specificity of the surveying
methodology for features \(i \in I\) (specified via
<code>feature_survey_sensitivity_column</code> and
<code>feature_survey_specificity_column</code> respectively).
Next, let \(H_{ij}\) denote the modelled probabilities of
the features \(i \in I\) occupying planning units \(j \in J\)
(specified via <code>site_probability_columns</code>).
To describe the accuracy of the environmental niche models, let \({S'}_i\)
and \({N'}_i\) denote the sensitivity and specificity (respectively) of
the models for features \(i \in I\) (specified
via <code>feature_model_sensitivity_column</code> and
<code>feature_model_specificity_column</code> respectively).
We can calculate the prior probability of each feature \(i \in I\)
occupying each site \(j \in J\) following
(or manually specified via <code>prior_matrix</code>):</p>
<p>$$
P_{ij} = \\
S_i, \text{ if } D_j = 1, H_{ij} = 1 \space (i \text{ detected in } j) \\
1 - N_i, \text{ else if } D_j = 1, H_{ij} = 0 \space (i \text{ not detected in } j) \\
{S'}_i, \text{ else if } D_j = 0, {H'}_{ij} \geq 0.5 \space (j \text{ not surveyed and } i \text{ predicted present in } j \text{)} \\
1 - {N'}_i, \text{ else if } D_j = 0, {H'}_{ij} \geq 0.5 \space (j \text{ not surveyed and } i \text{ predicted absent in } j \text{)} \\
$$</p>
<p>Since we do not know which features truly occur in which sites, let \(S\)
denote the full range of possible states that affect the evaluation of the
management action (indexed by \(s\)). Here, \(S\) represents all possible
combinations of different species occurring in different sites.
The total number of states \(s \in S\) is incredibly large for even a small
conservation planning problem. For example, a conservation planning problem
involving ten sites and four features (species) has approximately
\(1.09 \times 10^{12}\) states. In other words, one trillion ninety-nine
billion five hundred eleven million six hundred twenty-seven thousand seven
hundred seventy-five states. Unfortunately, this means that it is not
computationally feasible to calculate exact values of information for
conservation problems involving many sites. Let \(G_{ijs}\) indicate which
species \(i \in I\) occur in which planning units \(j \in J\) given
state \(s \in S\). We calculate the prior probability of each state
\(s \in S\) being the true state following:</p>
<p>$$P_s = \\
Q_{ij}, \text{ if } G_{ijs} = 1 \\
1 - Q_{ij}, \text{ else } \\
$$</p>
<p>Under the <em>approximation method</em>, we define \(S'\) which contains a
subset of sites \(s \in S\). The prior probability of each state
\(s \in S'\) being the true state is calculated following:</p>
<p>$$
{P'}_s = \frac{P_s}{\sum_{k \in S'} P_k}
$$</p>
<p>Here, the management action is to purchase a set of sites for
protected area establishment. In other words, the management action is to
implement a spatial prioritisation for protected area establishment. The
management action is subject to a budget that limits the cost of purchasing
sites. Let \(A_j\) denote the cost of acquiring each site
\(j \in J\) (specified via <code>site_management_cost_column</code>),
and \(b\) denote the total budget available for
conservation (specified via <code>total_budget</code>). Furthermore,
let \(T_j\) denote which sites \(j \in j\) are locked into the
prioritization (e.g. sites in existing protected area system).
Given these data, let \(Z\) denote the
set of all possible management actions (indexed by \(z\)). To describe
each of the possible management actions \(z \in Z\), let \(X_{jz}\)
indicate which sites \(j \in J\) are purchased for protection (using zeros
and ones) under a given management action \(z \in Z\). To evaluate the
conservation value of a given management action, we will adopt equations
used in the objective function of the <em>Zonation</em> decision support tool
(Moilanen 2007). Let \(\alpha_i\) and \(\gamma_i\) denote scaling terms
for species \(i \in I\) to parametrise trade-offs in the protection of
different species. These scaling terms are crucial to ensure that competing
management decisions are evaluated in a manner conforming to the principle
of complementarity (Vane-Wright <em>et al.</em> 1991).
The value of a management action (\(z\)) for a given state (\(s\)) is
calculated following, wherein \(Y_j\) indicates
if each site \(j \in J\) is selected in the (\(z\)) management action or
not (using zeros and ones):</p>
<p>$$
V(z, s) = \sum_{i \in I} \alpha_i \left( \sum_{j \in J} Y_{j} G_{ijs} \right) ^{\gamma_i} \\
$$</p>
<p>We can now calculate the
<em>approximate expected value of the management decision given
current information</em> (\(\text{EV'}_{\text{current}}\)). To achieve this, we
assume that the decision maker will act optimally. Thus the
<em>approximate expected value of the management decision given current
information</em> is the <em>approximate expected value of the best management
action given current information</em>. Let \(z'\) denote an optimal management
action \(z \in Z\) given current information. This can be expressed as
follows:</p>
<p>$$
\text{EV'}_{\text{current}} = \mathbb{E} \left[ V(z', S') \right] = \max_{z \in Z} \mathbb{E} \left[ V(z, S') \right] \\
\mathbb{E} \left[ V(z, S') \right] = \sum_{s \in S'} V(z, s) \times {P'}_s \\
$$</p>
<p>We use combinatorial optimization to identify the (\(z'\))
best management action given current information. Specifically, we
formulate an integer programming problem -- using piecewise linear
constraints to linearise the objective function (precision controlled using
<code>n_approx_n_approx_obj_fun_points</code>) -- and solve it to (near)
optimality (controlled using
<code>optimality_gap</code>) with the <span class="pkg">gurobi</span> package. Let \({X'}_j\)
indicate if each planning unit \(j \in J\) is selected in the \(z'\) best
management action given current information (using zeros and ones):</p>
<p>$$
\text{maximize } \sum_{i \in I} \alpha_i \left( \sum_{j \in J} {X'}_j Q_{ij} \right) ^{\gamma_i} \\
\text{subject to } \sum_{j \in J} {{X'}_j} A_j \leq b \\
{{X'}_j} \geq T_j \text{ } \forall j \in J \\
{{X'}_j} \in \{ 0, 1 \} \text{ } \forall j \in J
$$</p>
<p>The accuracy of the approximate method depends on which subset of states
\(s \in S'\) are used for the calculations. As such, this function
calculates multiple estimates of the  <em>approximate expected value of
the management decision given current information</em>
(\(\text{EV'}_{\text{current}}\)) using multiple subsets of states \(s
\in S'\) and reports the mean and standard error of these estimates. The
number of estimates is controlled using the <code>n_replicates</code> parameter,
and the number of states in \(S'\) is controlled using the
<code>n_states_per_replicate</code> parameter. For a given replicate, the states
are sampled randomly without replacement. This means that the
<em>approximation method</em> is equivalent to the <em>exact method</em>
when the argument to <code>n_states_per_replicate</code> is equal to the total
number of states.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Moilanen A (2007) Landscape zonation, benefit functions and target-based
planning: unifying reserve selection strategies.
<em>Biological Conservation</em>, <strong>134</strong>: 571--579.</p>
<p>Vane-Wright RI, Humphries CJ, &amp; Williams PH (1991) What to
protect? Systematics and the agony of choice.
<em>Biological Conservation</em>, <strong>55</strong>: 235--254.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>prior_probability_matrix</code>,
<code>evdci</code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># set seeds for reproducibility</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>RandomFields</span>)</div><div class='output co'>#&gt; <span class='message'>Loading required package: sp</span></div><div class='output co'>#&gt; <span class='message'>Loading required package: RandomFieldsUtils</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘RandomFields’</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from ‘package:RandomFieldsUtils’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    RFoptions</span></div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Random'>set.seed</a></span>(<span class='fl'>123</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/RandomFields/topics/RFoptions'>RFoptions</a></span>(<span class='kw'>seed</span> <span class='kw'>=</span> <span class='fl'>123</span>)

<span class='co'># simulate data</span>
<span class='no'>site_data</span> <span class='kw'>&lt;-</span> <span class='fu'>simulate_site_data</span>(<span class='kw'>n_sites</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>n_features</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>prop</span> <span class='kw'>=</span> <span class='fl'>0.5</span>)</div><div class='output co'>#&gt; ...</div><div class='input'><span class='no'>feature_data</span> <span class='kw'>&lt;-</span> <span class='fu'>simulate_feature_data</span>(<span class='kw'>n_features</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>prop</span> <span class='kw'>=</span> <span class='fl'>1</span>)

<span class='co'># preview simulated data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>site_data</span>)</div><div class='output co'>#&gt; Simple feature collection with 5 features and 9 fields
#&gt; geometry type:  POINT
#&gt; dimension:      XY
#&gt; bbox:           xmin: 0.2875775 ymin: 0.0455565 xmax: 0.9404673 ymax: 0.892419
#&gt; epsg (SRID):    NA
#&gt; proj4string:    NA
#&gt; <span style='color: #949494;'># A tibble: 5 x 10</span><span>
#&gt;   survey_cost management_cost     e1     e2     e3    f1    f2    p1     p2
#&gt;         </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>           </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span>        8.13            73.9 -</span><span style='color: #BB0000;'>0.365</span><span>  0.642  1.08      1     1 0.950 0.940 
#&gt; </span><span style='color: #BCBCBC;'>2</span><span>        6.07            69.7 -</span><span style='color: #BB0000;'>0.303</span><span> -</span><span style='color: #BB0000;'>0.382</span><span> -</span><span style='color: #BB0000;'>0.838</span><span>     0     0 0.229 0.362 
#&gt; </span><span style='color: #BCBCBC;'>3</span><span>        3.74            62.0  1.77   1.42   1.11     </span><span style='color: #BB0000;'>NA</span><span>    </span><span style='color: #BB0000;'>NA</span><span> 0.789 0.022</span><span style='text-decoration: underline;'>8</span><span>
#&gt; </span><span style='color: #BCBCBC;'>4</span><span>        6.82            71.8 -</span><span style='color: #BB0000;'>0.404</span><span> -</span><span style='color: #BB0000;'>0.771</span><span> -</span><span style='color: #BB0000;'>0.732</span><span>    </span><span style='color: #BB0000;'>NA</span><span>    </span><span style='color: #BB0000;'>NA</span><span> 0.157 0.552 
#&gt; </span><span style='color: #BCBCBC;'>5</span><span>        5.22            70.7 -</span><span style='color: #BB0000;'>0.697</span><span> -</span><span style='color: #BB0000;'>0.910</span><span> -</span><span style='color: #BB0000;'>0.614</span><span>     1     1 0.201 0.798 
#&gt; </span><span style='color: #949494;'># … with 1 more variable: geometry </span><span style='color: #949494;font-style: italic;'>&lt;POINT&gt;</span><span></div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>feature_data</span>)</div><div class='output co'>#&gt; </span><span style='color: #949494;'># A tibble: 2 x 8</span><span>
#&gt;   name  survey survey_sensitiv… survey_specific… model_sensitivi…
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span>             </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>            </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>            </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> f1    TRUE              0.955            0.822            0.775
#&gt; </span><span style='color: #BCBCBC;'>2</span><span> f2    TRUE              0.961            0.829            0.723
#&gt; </span><span style='color: #949494;'># … with 3 more variables: model_specificity </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, alpha </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #949494;'>, gamma </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span></div><div class='input'>
<span class='co'># set total budget for managing sites for conservation</span>
<span class='no'>total_budget</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sum'>sum</a></span>(<span class='no'>site_data</span>$<span class='no'>management_cost</span>) * <span class='fl'>0.5</span>

<span class='co'># calculate expected value of management decision given current information</span>
<span class='co'># using approximate method with 100 replicates and 50 states per replicate</span>
<span class='no'>ev_prime_current</span> <span class='kw'>&lt;-</span> <span class='fu'>approx_evdci</span>(
    <span class='no'>site_data</span>, <span class='no'>feature_data</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/RandomFields/topics/QMath'>c</a></span>(<span class='st'>"f1"</span>, <span class='st'>"f2"</span>), <span class='fu'><a href='https://www.rdocumentation.org/packages/RandomFields/topics/QMath'>c</a></span>(<span class='st'>"p1"</span>, <span class='st'>"p2"</span>),
    <span class='st'>"management_cost"</span>, <span class='st'>"survey_sensitivity"</span>, <span class='st'>"survey_specificity"</span>,
    <span class='st'>"model_sensitivity"</span>, <span class='st'>"model_specificity"</span>, <span class='st'>"alpha"</span>, <span class='st'>"gamma"</span>,
    <span class='no'>total_budget</span>, <span class='kw'>n_approx_replicates</span> <span class='kw'>=</span> <span class='fl'>100</span>,
    <span class='kw'>n_approx_states_per_replicate</span> <span class='kw'>=</span> <span class='fl'>50</span>)

<span class='co'># print approximate value</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/print'>print</a></span>(<span class='no'>ev_prime_current</span>)</div><div class='output co'>#&gt;   [1] 5.257948 5.268949 5.076086 5.311225 5.270498 5.013506 4.984978 5.245544
#&gt;   [9] 5.274660 5.253368 5.324316 5.096529 5.196068 5.238679 5.136699 5.285208
#&gt;  [17] 5.280123 5.249547 5.325205 5.211823 5.405049 5.310683 5.202448 5.200951
#&gt;  [25] 4.979316 5.358222 5.222401 5.332026 5.299542 5.159650 5.382077 5.280566
#&gt;  [33] 5.258336 4.995365 5.449690 5.296921 4.327927 5.271039 5.176513 5.403976
#&gt;  [41] 5.162444 5.029173 5.407650 5.161348 5.297715 5.403019 5.377093 5.324529
#&gt;  [49] 5.309338 5.309081 5.369413 5.256179 5.318448 4.204293 5.309229 5.247825
#&gt;  [57] 5.348056 5.389953 5.278698 5.013264 5.067286 5.366988 5.357762 5.285609
#&gt;  [65] 5.156600 5.346482 5.315566 5.365432 5.312733 5.353947 5.316221 5.270933
#&gt;  [73] 5.390656 5.276575 5.174468 5.296787 5.389758 5.343357 5.238931 5.195727
#&gt;  [81] 5.325147 5.364135 5.364868 5.391050 5.388370 5.305879 5.133709 5.354336
#&gt;  [89] 5.197784 5.235783 5.288661 5.321727 5.244270 5.369888 5.413943 5.018611
#&gt;  [97] 5.369152 5.334605 5.112121 5.379914</div><div class='input'>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='https://josephrbennett.wordpress.com'>Joseph Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

