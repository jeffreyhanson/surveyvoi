<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Expected value of the decision given current information — evdci • surveyvoi</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Expected value of the decision given current information — evdci" />
<meta property="og:description" content="Calculate the expected value of the management decision
given current information. This metric describes the value of the management
decision that is expected when the decision maker is limited to
existing biodiversity data (i.e. survey data and environmental niche models)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">surveyvoi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/surveyvoi.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jeffreyhanson/surveyvoi/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Expected value of the decision given current information</h1>
    <small class="dont-index">Source: <a href='https://github.com/jeffreyhanson/surveyvoi/blob/master/R/evdci.R'><code>R/evdci.R</code></a></small>
    <div class="hidden name"><code>evdci.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate the <em>expected value of the management decision
given current information</em>. This metric describes the value of the management
decision that is expected when the decision maker is limited to
existing biodiversity data (i.e. survey data and environmental niche models).</p>
    </div>

    <pre class="usage"><span class='fu'>evdci</span><span class='op'>(</span>
  <span class='va'>site_data</span>,
  <span class='va'>feature_data</span>,
  <span class='va'>site_detection_columns</span>,
  <span class='va'>site_n_surveys_columns</span>,
  <span class='va'>site_probability_columns</span>,
  <span class='va'>site_management_cost_column</span>,
  <span class='va'>feature_survey_sensitivity_column</span>,
  <span class='va'>feature_survey_specificity_column</span>,
  <span class='va'>feature_model_sensitivity_column</span>,
  <span class='va'>feature_model_specificity_column</span>,
  <span class='va'>feature_target_column</span>,
  <span class='va'>total_budget</span>,
  site_management_locked_in_column <span class='op'>=</span> <span class='cn'>NULL</span>,
  site_management_locked_out_column <span class='op'>=</span> <span class='cn'>NULL</span>,
  prior_matrix <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>site_data</th>
      <td><p><code><a href='https://r-spatial.github.io/sf/reference/sf.html'>sf::sf()</a></code> object with site data.</p></td>
    </tr>
    <tr>
      <th>feature_data</th>
      <td><p><code><a href='https://rdrr.io/r/base/data.frame.html'>base::data.frame()</a></code> object with feature data.</p></td>
    </tr>
    <tr>
      <th>site_detection_columns</th>
      <td><p><code>character</code> names of <code>numeric</code>
columns in the argument to <code>site_data</code> that contain the proportion of
surveys conducted within each site that detected each feature.
Each column should correspond to a different feature, and contain
a proportion value (between zero and one). If a site has
not previously been surveyed, a value of zero should be used.</p></td>
    </tr>
    <tr>
      <th>site_n_surveys_columns</th>
      <td><p><code>character</code> names of <code>numeric</code>
columns in the argument to <code>site_data</code> that contain the total
number of surveys conducted for each each feature within each site.
Each column should correspond to a different feature, and contain
a non-negative integer number (e.g. 0, 1, 2, 3). If a site has
not previously been surveyed, a value of zero should be used.</p></td>
    </tr>
    <tr>
      <th>site_probability_columns</th>
      <td><p><code>character</code> names of <code>numeric</code>
columns in the argument to <code>site_data</code> that contain modelled
probabilities of occupancy for each feature in each site.
Each column should correspond to a different feature, and contain
probability data (values between zero and one). No missing (<code>NA</code>)
values are permitted in these columns.</p></td>
    </tr>
    <tr>
      <th>site_management_cost_column</th>
      <td><p><code>character</code> name of column in the
argument to <code>site_data</code> that contains costs for managing each
site for conservation. This column should have <code>numeric</code> values that
are equal to or greater than zero. No missing (<code>NA</code>) values are
permitted in this column.</p></td>
    </tr>
    <tr>
      <th>feature_survey_sensitivity_column</th>
      <td><p><code>character</code> name of the
column in the argument to <code>feature_data</code> that contains
probability of future surveys correctly detecting a presence of each
feature in a given site (i.e. the sensitivity of the survey methodology).
This column should have <code>numeric</code> values that are between zero and
one. No missing (<code>NA</code>) values are permitted in this column.</p></td>
    </tr>
    <tr>
      <th>feature_survey_specificity_column</th>
      <td><p><code>character</code> name of the
column in the argument to <code>feature_data</code> that contains
probability of future surveys correctly detecting an absence of each
feature in a given site (i.e. the specificity of the survey methodology).
This column should have <code>numeric</code> values that are between zero and
one. No missing (<code>NA</code>) values are permitted in this column.</p></td>
    </tr>
    <tr>
      <th>feature_model_sensitivity_column</th>
      <td><p><code>character</code> name of the
column in the argument to <code>feature_data</code> that contains
probability of the initial models correctly predicting a presence of each
feature in a given site (i.e. the sensitivity of the models).
This column should have <code>numeric</code> values that are between zero and
one. No missing (<code>NA</code>) values are permitted in this column.
This should ideally be calculated using
<code><a href='fit_xgb_occupancy_models.html'>fit_xgb_occupancy_models()</a></code> or
<code><a href='fit_hglm_occupancy_models.html'>fit_hglm_occupancy_models()</a></code>.</p></td>
    </tr>
    <tr>
      <th>feature_model_specificity_column</th>
      <td><p><code>character</code> name of the
column in the argument to <code>feature_data</code> that contains
probability of the initial models correctly predicting an absence of each
feature in a given site (i.e. the specificity of the models).
This column should have <code>numeric</code> values that are between zero and
one. No missing (<code>NA</code>) values are permitted in this column.
This should ideally be calculated using
<code><a href='fit_xgb_occupancy_models.html'>fit_xgb_occupancy_models()</a></code> or
<code><a href='fit_hglm_occupancy_models.html'>fit_hglm_occupancy_models()</a></code>.</p></td>
    </tr>
    <tr>
      <th>feature_target_column</th>
      <td><p><code>character</code> name of the column in the
argument to <code>feature_data</code> that contains the \(target\)
values used to parametrize the conservation benefit of managing of each
feature.
This column should have <code>numeric</code> values that
are equal to or greater than zero. No missing (<code>NA</code>) values are
permitted in this column.</p></td>
    </tr>
    <tr>
      <th>total_budget</th>
      <td><p><code>numeric</code> maximum expenditure permitted
for conducting surveys and managing sites for conservation.</p></td>
    </tr>
    <tr>
      <th>site_management_locked_in_column</th>
      <td><p><code>character</code> name of the column
in the argument to <code>site_data</code> that contains <code>logical</code>
(<code>TRUE</code> / <code>FALSE</code>) values indicating which sites should
be locked in for (<code>TRUE</code>) being managed for conservation or
(<code>FALSE</code>) not. No missing (<code>NA</code>) values are permitted in this
column. This is useful if some sites have already been earmarked for
conservation, or if some sites are already being managed for conservation.
Defaults to <code>NULL</code> such that no sites are locked in.</p></td>
    </tr>
    <tr>
      <th>site_management_locked_out_column</th>
      <td><p><code>character</code> name of the column
in the argument to <code>site_data</code> that contains <code>logical</code>
(<code>TRUE</code> / <code>FALSE</code>) values indicating which sites should
be locked out for (<code>TRUE</code>) being managed for conservation or
(<code>FALSE</code>) not. No missing (<code>NA</code>) values are permitted in this
column. This is useful if some sites could potentially be surveyed
to improve model predictions even if they cannot be managed for
conservation. Defaults to <code>NULL</code> such that no sites are locked out.</p></td>
    </tr>
    <tr>
      <th>prior_matrix</th>
      <td><p><code>numeric</code> <code>matrix</code> containing
the prior probability of each feature occupying each site.
Rows correspond to features, and columns correspond to sites.
Defaults to <code>NULL</code> such that prior data is calculated automatically
using <code><a href='prior_probability_matrix.html'>prior_probability_matrix()</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>numeric</code> value.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function calculates the expected value and does not
use approximation methods. As such, this function can only be applied
to very small problems.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='prior_probability_matrix.html'>prior_probability_matrix()</a></code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \dontrun{</span>
<span class='co'># set seeds for reproducibility</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://ms.math.uni-mannheim.de/de/publications/software/randomfields'>RandomFields</a></span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>123</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/RandomFields/man/RFoptions.html'>RFoptions</a></span><span class='op'>(</span>seed <span class='op'>=</span> <span class='fl'>123</span><span class='op'>)</span>

<span class='co'># simulate data</span>
<span class='va'>site_data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='simulate_site_data.html'>simulate_site_data</a></span><span class='op'>(</span>n_sites <span class='op'>=</span> <span class='fl'>5</span>, n_features <span class='op'>=</span> <span class='fl'>2</span>, prop <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span>
</div><div class='output co'>#&gt; ...</div><div class='input'><span class='va'>feature_data</span> <span class='op'>&lt;-</span> <span class='fu'><a href='simulate_feature_data.html'>simulate_feature_data</a></span><span class='op'>(</span>n_features <span class='op'>=</span> <span class='fl'>2</span>, prop <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>
<span class='va'>feature_data</span><span class='op'>$</span><span class='va'>target</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/RandomFields/man/QMath.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span>

<span class='co'># preview simulated data</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>site_data</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Simple feature collection with 5 features and 11 fields
#&gt; geometry type:  POINT
#&gt; dimension:      XY
#&gt; bbox:           xmin: 0.2875775 ymin: 0.0455565 xmax: 0.9404673 ymax: 0.892419
#&gt; CRS:            NA
#&gt; <span style='color: #555555;'># A tibble: 5 x 12</span><span>
#&gt;   survey_cost management_cost    f1    f2    n1    n2     e1     e2     e3    p1
#&gt;         </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>           </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span>        8.13            73.9   1       1     5     5 -</span><span style='color: #BB0000;'>0.365</span><span>  0.642  1.08  0.991
#&gt; </span><span style='color: #555555;'>2</span><span>        6.07            69.7   0.2     0     5     5 -</span><span style='color: #BB0000;'>0.303</span><span> -</span><span style='color: #BB0000;'>0.382</span><span> -</span><span style='color: #BB0000;'>0.838</span><span> 0.126
#&gt; </span><span style='color: #555555;'>3</span><span>        3.74            62.0   0       0     0     0  1.77   1.42   1.11  0.892
#&gt; </span><span style='color: #555555;'>4</span><span>        6.82            71.8   0       0     2     2 -</span><span style='color: #BB0000;'>0.404</span><span> -</span><span style='color: #BB0000;'>0.771</span><span> -</span><span style='color: #BB0000;'>0.732</span><span> 0.064
#&gt; </span><span style='color: #555555;'>5</span><span>        5.22            70.7   0       0     0     0 -</span><span style='color: #BB0000;'>0.697</span><span> -</span><span style='color: #BB0000;'>0.910</span><span> -</span><span style='color: #BB0000;'>0.614</span><span> 0.099
#&gt; </span><span style='color: #555555;'># … with 2 more variables: p2 </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>, geometry </span><span style='color: #555555;font-style: italic;'>&lt;POINT&gt;</span><span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>feature_data</span><span class='op'>)</span>
</div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 2 x 7</span><span>
#&gt;   name  survey survey_sensitiv… survey_specific… model_sensitivi…
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span>             </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>            </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>            </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span> f1    TRUE              0.965            0.821            0.701
#&gt; </span><span style='color: #555555;'>2</span><span> f2    TRUE              0.960            0.814            0.701
#&gt; </span><span style='color: #555555;'># … with 2 more variables: model_specificity </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span style='color: #555555;'>, target </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span></div><div class='input'>
<span class='co'># set total budget for managing sites for conservation</span>
<span class='va'>total_budget</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>site_data</span><span class='op'>$</span><span class='va'>management_cost</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>0.5</span>

<span class='co'># calculate expected value of management decision given current information</span>
<span class='co'># using exact method</span>
<span class='va'>ev_current</span> <span class='op'>&lt;-</span> <span class='fu'>evdci</span><span class='op'>(</span>
  <span class='va'>site_data</span>, <span class='va'>feature_data</span>, <span class='fu'><a href='https://rdrr.io/pkg/RandomFields/man/QMath.html'>c</a></span><span class='op'>(</span><span class='st'>"f1"</span>, <span class='st'>"f2"</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/pkg/RandomFields/man/QMath.html'>c</a></span><span class='op'>(</span><span class='st'>"n1"</span>, <span class='st'>"n2"</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/pkg/RandomFields/man/QMath.html'>c</a></span><span class='op'>(</span><span class='st'>"p1"</span>, <span class='st'>"p2"</span><span class='op'>)</span>,
  <span class='st'>"management_cost"</span>, <span class='st'>"survey_sensitivity"</span>, <span class='st'>"survey_specificity"</span>,
  <span class='st'>"model_sensitivity"</span>, <span class='st'>"model_specificity"</span>,
  <span class='st'>"target"</span>, <span class='va'>total_budget</span><span class='op'>)</span>

<span class='co'># print exact value</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>ev_current</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 1.999758</div><div class='input'><span class='co'># }</span>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='https://josephrbennett.wordpress.com'>Joseph Bennett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


